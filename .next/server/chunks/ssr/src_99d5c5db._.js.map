{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/damanegi/Desktop/dev/KoreanMemes/src/components/CommentSection.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { MessageCircle, Send, User, Edit2, Trash2, X, Check } from 'lucide-react'\n\ninterface Comment {\n  id: string\n  content: string\n  nickname?: string\n  createdAt: string\n  updatedAt?: string\n  translatedContent?: string | null\n}\n\ninterface CommentSectionProps {\n  postId: string\n}\n\ninterface ActionModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onConfirm: (password: string) => void\n  title: string\n  placeholder: string\n  buttonText: string\n  buttonColor: string\n}\n\n// 한국어 텍스트 감지 함수\nfunction isKoreanText(text: string): boolean {\n  const koreanRegex = /[\\u3131-\\u3163\\uac00-\\ud7a3]/g\n  const koreanMatches = text.match(koreanRegex)\n  const koreanCharCount = koreanMatches ? koreanMatches.length : 0\n  const totalCharCount = text.replace(/\\s/g, '').length // 공백 제외\n  \n  if (totalCharCount === 0) return false\n  \n  const koreanPercentage = koreanCharCount / totalCharCount\n  return koreanPercentage >= 0.6 // 60% 이상이 한국어이면 한국어 텍스트로 판단\n}\n\nfunction ActionModal({ isOpen, onClose, onConfirm, title, placeholder, buttonText, buttonColor }: ActionModalProps) {\n  const [password, setPassword] = useState('')\n\n  if (!isOpen) return null\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (password.trim() && password.length >= 4) {\n      onConfirm(password.trim())\n      setPassword('')\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-medium text-gray-900\">{title}</h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <input\n              type=\"password\"\n              placeholder={placeholder}\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              autoFocus\n              autoComplete=\"current-password\"\n            />\n            {password.length > 0 && password.length < 4 && (\n              <div className=\"text-xs text-red-600 mt-1\">\n                Password must be at least 4 characters long\n              </div>\n            )}\n          </div>\n          \n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className={`flex-1 px-4 py-2 text-white rounded-lg transition-colors ${buttonColor}`}\n              disabled={password.length < 4}\n            >\n              {buttonText}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport function CommentSection({ postId }: CommentSectionProps) {\n  console.log('CommentSection 렌더링됨, postId:', postId)\n  \n  const [comments, setComments] = useState<Comment[]>([])\n  const [newComment, setNewComment] = useState('')\n  const [nickname, setNickname] = useState('')\n  const [password, setPassword] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [fetchLoading, setFetchLoading] = useState(true)\n  const [fetchError, setFetchError] = useState('')\n  \n  // 수정 관련 상태\n  const [editingComment, setEditingComment] = useState<string | null>(null)\n  const [editContent, setEditContent] = useState('')\n  const [editPassword, setEditPassword] = useState('')\n  \n  // 삭제 관련 상태\n  const [deleteModal, setDeleteModal] = useState({ isOpen: false, commentId: '' })\n\n  const fetchComments = async () => {\n    try {\n      setFetchLoading(true)\n      setFetchError('')\n      const response = await fetch(`/api/posts/${postId}/comments`)\n      if (response.ok) {\n        const data = await response.json()\n        console.log('댓글 데이터:', data) // 디버깅용\n        setComments(Array.isArray(data) ? data : [])\n      } else {\n        setFetchError(`Failed to load comments: ${response.status}`)\n      }\n    } catch (error) {\n      console.error('댓글 로딩 실패:', error)\n      setFetchError('Error occurred while loading comments.')\n    } finally {\n      setFetchLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchComments()\n  }, [postId])\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    const now = new Date()\n    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60))\n    \n    if (diffInHours < 1) return 'Just now'\n    if (diffInHours < 24) return `${diffInHours}h ago`\n    if (diffInHours < 168) return `${Math.floor(diffInHours / 24)}d ago`\n    return date.toLocaleDateString()\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newComment.trim()) return\n\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch(`/api/posts/${postId}/comments`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          content: newComment.trim(),\n          nickname: nickname.trim() || undefined,\n          password: password.trim() || undefined\n        })\n      })\n\n      if (response.ok) {\n        setNewComment('')\n        setNickname('')\n        setPassword('')\n        await fetchComments()\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to submit comment.')\n      }\n    } catch {\n      setError('Error occurred while submitting comment.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleEdit = (comment: Comment) => {\n    setEditingComment(comment.id)\n    setEditContent(comment.content)\n    setEditPassword('')\n  }\n\n  const handleEditSubmit = async (commentId: string) => {\n    if (!editContent.trim() || !editPassword.trim()) return\n\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch(`/api/posts/${postId}/comments/${commentId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          content: editContent.trim(),\n          password: editPassword.trim()\n        })\n      })\n\n      if (response.ok) {\n        setEditingComment(null)\n        setEditContent('')\n        setEditPassword('')\n        await fetchComments()\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to update comment.')\n      }\n    } catch {\n      setError('Error occurred while updating comment.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCancelEdit = () => {\n    setEditingComment(null)\n    setEditContent('')\n    setEditPassword('')\n  }\n\n  const handleDeleteConfirm = async (password: string) => {\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch(`/api/posts/${postId}/comments/${deleteModal.commentId}`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ password })\n      })\n\n      if (response.ok) {\n        setDeleteModal({ isOpen: false, commentId: '' })\n        await fetchComments()\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to delete comment.')\n      }\n    } catch {\n      setError('Error occurred while deleting comment.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"mt-8 border-t pt-8\">\n      {/* 댓글 헤더 */}\n      <div className=\"flex items-center gap-2 mb-6\">\n        <MessageCircle className=\"h-5 w-5 text-blue-600\" />\n        <h3 className=\"text-lg font-medium text-gray-900\">\n          Comments {fetchLoading ? 'Loading...' : fetchError ? 'Load Failed' : `${comments.length}`}\n        </h3>\n      </div>\n\n      {/* 댓글 작성 폼 */}\n      <form onSubmit={handleSubmit} className=\"mb-8 bg-gray-50 rounded-lg p-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n          <input\n            type=\"text\"\n            placeholder=\"Nickname (optional)\"\n            value={nickname}\n            onChange={(e) => setNickname(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n            maxLength={50}\n          />\n          <div className=\"relative\">\n            <input\n              type=\"password\"\n              placeholder=\"Password (4+ characters, required)*\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n              maxLength={50}\n              autoComplete=\"new-password\"\n              required\n            />\n            {password.length > 0 && password.length < 4 && (\n              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                <span className=\"text-red-500 text-xs\">⚠️</span>\n              </div>\n            )}\n            {password.length >= 4 && (\n              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                <span className=\"text-green-500 text-xs\">✅</span>\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* 비밀번호 길이 안내 */}\n        {password.length > 0 && password.length < 4 && (\n          <div className=\"mb-3 text-xs text-red-600 bg-red-50 p-2 rounded\">\n            Password must be at least 4 characters long\n          </div>\n        )}\n        \n        <div className=\"mb-3\">\n          <textarea\n            placeholder=\"Write your comment...\"\n            value={newComment}\n            onChange={(e) => setNewComment(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm\"\n            rows={3}\n            maxLength={1000}\n            required\n          />\n          <div className=\"text-right text-sm text-gray-500 mt-1\">\n            {newComment.length}/1000\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-3 text-sm text-red-600 bg-red-50 p-2 rounded\">\n            {error}\n          </div>\n        )}\n\n        <button\n          type=\"submit\"\n          disabled={!newComment.trim() || password.length < 4 || loading}\n          className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          <Send className=\"h-4 w-4\" />\n          {loading ? 'Submitting...' : 'Post Comment'}\n        </button>\n        \n        {/* 필수 필드 안내 */}\n        <p className=\"text-xs text-gray-500 mt-2\">\n          * Password is required for comment editing and deletion\n        </p>\n      </form>\n\n      {/* 댓글 목록 */}\n      <div className=\"space-y-4\">\n        {fetchLoading ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            Loading comments... 🔄\n          </div>\n        ) : fetchError ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-red-600 mb-2\">{fetchError}</div>\n            <button \n              onClick={fetchComments}\n              className=\"text-blue-600 hover:text-blue-700 underline\"\n            >\n              Try Again\n            </button>\n          </div>\n        ) : comments.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            Be the first to comment! 💬\n          </div>\n        ) : (\n          comments.map((comment) => (\n            <div key={comment.id} className=\"bg-white border rounded-lg p-4\">\n              {editingComment === comment.id ? (\n                // 수정 모드\n                <div className=\"space-y-3\">\n                  <textarea\n                    value={editContent}\n                    onChange={(e) => setEditContent(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                    rows={3}\n                    maxLength={1000}\n                  />\n                  <div className=\"text-right text-sm text-gray-500\">\n                    {editContent.length}/1000\n                  </div>\n                  <input\n                    type=\"password\"\n                    placeholder=\"Enter password (4+ characters)\"\n                    value={editPassword}\n                    onChange={(e) => setEditPassword(e.target.value)}\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    maxLength={50}\n                  />\n                  {editPassword.length > 0 && editPassword.length < 4 && (\n                    <div className=\"text-xs text-red-600 mt-1\">\n                      Password must be at least 4 characters long\n                    </div>\n                  )}\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => handleEditSubmit(comment.id)}\n                      disabled={!editContent.trim() || editPassword.length < 4 || loading}\n                      className=\"flex items-center gap-1 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50 transition-colors\"\n                    >\n                      <Check className=\"h-3 w-3\" />\n                      Save Changes\n                    </button>\n                    <button\n                      onClick={handleCancelEdit}\n                      className=\"flex items-center gap-1 bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                // 일반 표시 모드\n                <>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <User className=\"h-4 w-4 text-gray-400\" />\n                      <span className=\"font-medium text-gray-900\">\n                        {comment.nickname === '익명' ? 'Anonymous' : (comment.nickname || 'Anonymous')}\n                      </span>\n                      <span className=\"text-sm text-gray-500\">\n                        {formatDate(comment.createdAt)}\n                        {comment.updatedAt && comment.updatedAt !== comment.createdAt && (\n                          <span className=\"text-xs text-gray-400 ml-1\">(edited)</span>\n                        )}\n                      </span>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      <button\n                        onClick={() => handleEdit(comment)}\n                        className=\"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors\"\n                        title=\"댓글 수정\"\n                      >\n                        <Edit2 className=\"h-3 w-3\" />\n                      </button>\n                      <button\n                        onClick={() => setDeleteModal({ isOpen: true, commentId: comment.id })}\n                        className=\"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors\"\n                        title=\"댓글 삭제\"\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  </div>\n                  <p className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                    {comment.content}\n                  </p>\n                  \n                  {/* 번역된 내용 표시 - 통일된 UI */}\n                  {comment.translatedContent && isKoreanText(comment.content) && (\n                    <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                      <div className=\"text-sm font-medium text-blue-700 mb-2\">Translation</div>\n                      <p className=\"text-blue-800 text-sm leading-relaxed whitespace-pre-wrap italic\">\n                        {comment.translatedContent}\n                      </p>\n                    </div>\n                  )}\n                  \n                  {/* 영문 댓글의 한글 번역 - 동일한 스타일 */}\n                  {comment.translatedContent && !isKoreanText(comment.content) && (\n                    <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                      <div className=\"text-sm font-medium text-blue-700 mb-2\">Translation</div>\n                      <p className=\"text-blue-800 text-sm leading-relaxed whitespace-pre-wrap italic\">\n                        {comment.translatedContent}\n                      </p>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* 삭제 확인 모달 */}\n      <ActionModal\n        isOpen={deleteModal.isOpen}\n        onClose={() => setDeleteModal({ isOpen: false, commentId: '' })}\n        onConfirm={handleDeleteConfirm}\n        title=\"Delete Comment\"\n        placeholder=\"Enter password (4+ characters)\"\n        buttonText=\"Delete\"\n        buttonColor=\"bg-red-600 hover:bg-red-700\"\n      />\n    </div>\n  )\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["file:///Users/damanegi/Desktop/dev/KoreanMemes/src/app/post/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, Suspense } from 'react'\nimport { useParams, useRouter, useSearchParams } from 'next/navigation'\nimport { \n  ArrowLeft, \n  Heart, \n  Eye, \n  Calendar,\n  Clock,\n  Share2,\n  Loader2,\n  AlertCircle,\n  Edit3,\n  Trash2\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { CommentSection } from '@/components/CommentSection'\nimport { useAuth } from '@/lib/auth'\n\ninterface Post {\n  id: string\n  title: string\n  koreanTitle?: string\n  content: string\n  koreanContent?: string\n  extractedComments?: string[]\n  translatedComments?: string[]\n  category: string\n  imageUrl?: string\n  additionalImages?: string[]\n  likes: number\n  views: number\n  createdAt: string\n  updatedAt: string\n}\n\nfunction PostDetailContent() {\n  const params = useParams()\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { isAuthenticated, isLoading } = useAuth()\n  const [post, setPost] = useState<Post | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [viewIncremented, setViewIncremented] = useState(false)\n  const [hasSecretAccess, setHasSecretAccess] = useState(false)\n\n  const postId = params?.id as string\n\n  const categories = [\n    { id: 'HUMOR', name: 'K-Humor', emoji: '😂' },\n    { id: 'CULTURE', name: 'K-Culture', emoji: '🏮' },\n    { id: 'DRAMA', name: 'K-Drama', emoji: '📺' },\n    { id: 'LIFESTYLE', name: 'K-Lifestyle', emoji: '🌸' },\n    { id: 'TECH', name: 'K-Tech', emoji: '💻' },\n    { id: 'GENERAL', name: 'General', emoji: '💬' },\n  ]\n\n  // 비밀 액세스 키 확인\n  useEffect(() => {\n    const accessKey = searchParams.get('access')\n    const secretKey = 'korean-memes-secret-2024'\n    \n    if (accessKey === secretKey) {\n      setHasSecretAccess(true)\n    } else {\n      setHasSecretAccess(false)\n    }\n  }, [searchParams])\n\n  // 수정/삭제 권한 확인 - 로딩 중이 아닐 때만 권한 허용\n  const hasEditPermission = !isLoading && (isAuthenticated || hasSecretAccess)\n\n  // 클라이언트 사이드 메타데이터 업데이트\n  useEffect(() => {\n    if (!post) return\n\n    const categoryInfo = getCategoryInfo(post.category)\n    const description = post.content ? \n      `${post.content.substring(0, 160)}...` : \n      `Korean ${categoryInfo.name.toLowerCase()} content: ${post.title}. ${post.koreanTitle ? `Original: ${post.koreanTitle}` : ''}`\n\n    // 페이지 제목 업데이트\n    document.title = `${post.title} - ${categoryInfo.name} | Korean Memes Hub`\n    \n    // 메타 태그 업데이트\n    const updateMeta = (name: string, content: string) => {\n      let meta = document.querySelector(`meta[name=\"${name}\"]`) || \n                 document.querySelector(`meta[property=\"${name}\"]`)\n      if (!meta) {\n        meta = document.createElement('meta')\n        if (name.startsWith('og:') || name.startsWith('twitter:')) {\n          meta.setAttribute('property', name)\n        } else {\n          meta.setAttribute('name', name)\n        }\n        document.head.appendChild(meta)\n      }\n      meta.setAttribute('content', content)\n    }\n\n    // 기본 메타 태그\n    updateMeta('description', description)\n    updateMeta('keywords', ['Korean memes', 'Korean culture', categoryInfo.name, 'Korean humor', 'K-culture'].join(', '))\n    \n    // Open Graph 태그\n    updateMeta('og:title', post.title)\n    updateMeta('og:description', description)\n    updateMeta('og:image', post.imageUrl || '/og-post-default.jpg')\n    updateMeta('og:url', `http://localhost:3000/post/${post.id}`)\n    updateMeta('og:type', 'article')\n    \n    // Twitter 카드\n    updateMeta('twitter:title', post.title)\n    updateMeta('twitter:description', description)\n    updateMeta('twitter:image', post.imageUrl || '/twitter-post-default.jpg')\n    updateMeta('twitter:card', 'summary_large_image')\n\n    // Canonical URL\n    let canonical = document.querySelector('link[rel=\"canonical\"]')\n    if (!canonical) {\n      canonical = document.createElement('link')\n      canonical.setAttribute('rel', 'canonical')\n      document.head.appendChild(canonical)\n    }\n    canonical.setAttribute('href', `http://localhost:3000/post/${post.id}`)\n\n  }, [post])\n\n  useEffect(() => {\n    if (!postId) return\n\n    const fetchPost = async () => {\n      try {\n        setLoading(true)\n        const response = await fetch(`/api/posts/${postId}`)\n        \n        if (!response.ok) {\n          throw new Error('Failed to fetch post')\n        }\n\n        const data = await response.json()\n        setPost(data.post)\n      } catch (err) {\n        console.error('Error fetching post:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load post')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchPost()\n  }, [postId])\n\n  // 조회수 증가 (한 번만 실행)\n  useEffect(() => {\n    if (!postId || viewIncremented) return\n\n    const incrementView = async () => {\n      try {\n        const response = await fetch(`/api/posts/${postId}/view`, {\n          method: 'POST'\n        })\n        \n        if (response.ok) {\n          const data = await response.json()\n          // 로컬 상태의 조회수 업데이트\n          setPost(prev => prev ? { ...prev, views: data.views } : null)\n          setViewIncremented(true)\n        }\n      } catch (error) {\n        console.error('Failed to increment view:', error)\n      }\n    }\n\n    // post가 로드된 후에만 조회수 증가\n    if (post && !loading) {\n      incrementView()\n    }\n  }, [postId, viewIncremented, post?.id, loading])\n\n  const handleDelete = async () => {\n    if (!post) return\n\n    const confirmed = window.confirm('정말로 이 게시글을 삭제하시겠습니까?')\n    if (!confirmed) return\n\n    setIsDeleting(true)\n    \n    try {\n      const response = await fetch(`/api/posts/${post.id}`, {\n        method: 'DELETE'\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to delete post')\n      }\n\n      // 삭제 성공 시 홈으로 리디렉션\n      router.push('/')\n    } catch (error) {\n      console.error('Delete error:', error)\n      alert('게시글 삭제 중 오류가 발생했습니다.')\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    return date.toLocaleDateString('ko-KR', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    })\n  }\n\n  const getCategoryInfo = (categoryId: string) => {\n    return categories.find(cat => cat.id === categoryId) || categories[categories.length - 1]\n  }\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl px-4 py-8 mx-auto\">\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"w-8 h-8 text-blue-600 animate-spin\" />\n          <span className=\"ml-3 text-gray-600\">Loading post...</span>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !post) {\n    return (\n      <div className=\"max-w-4xl px-4 py-8 mx-auto\">\n        <div className=\"py-12 text-center\">\n          <AlertCircle className=\"w-16 h-16 mx-auto mb-4 text-red-400\" />\n          <h2 className=\"mb-2 text-xl font-bold text-gray-900\">\n            {error || 'Post not found'}\n          </h2>\n          <p className=\"mb-6 text-gray-600\">\n            The post you&apos;re looking for doesn&apos;t exist or has been removed.\n          </p>\n          <Link \n            href=\"/\"\n            className=\"inline-flex items-center gap-2 px-6 py-3 text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Back to Home\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  const categoryInfo = getCategoryInfo(post.category)\n\n  return (\n    <div className=\"max-w-4xl px-4 py-8 mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <Link \n          href=\"/\"\n          className=\"flex items-center gap-2 text-gray-600 transition-colors hover:text-gray-900\"\n        >\n          <ArrowLeft className=\"w-5 h-5\" />\n          Back to Home\n        </Link>\n        \n        {/* 권한이 있는 경우에만 수정/삭제 버튼 표시 */}\n        {hasEditPermission && (\n          <div className=\"flex items-center gap-3\">\n            <Link\n              href={`/edit/${post.id}${hasSecretAccess ? '?access=korean-memes-secret-2024' : ''}`}\n              className=\"flex items-center gap-2 px-4 py-2 text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700\"\n            >\n              <Edit3 className=\"w-4 h-4\" />\n              수정\n            </Link>\n            <button\n              onClick={handleDelete}\n              disabled={isDeleting}\n              className=\"flex items-center gap-2 px-4 py-2 text-white transition-colors bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isDeleting ? (\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n              ) : (\n                <Trash2 className=\"w-4 h-4\" />\n              )}\n              {isDeleting ? '삭제 중...' : '삭제'}\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Post Content */}\n      <article className=\"overflow-hidden bg-white border rounded-lg shadow-sm\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-gray-100\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <span className=\"px-3 py-1 text-sm font-medium text-blue-700 bg-blue-100 rounded-full\">\n              {categoryInfo.emoji} {categoryInfo.name}\n            </span>\n            <div className=\"flex items-center text-sm text-gray-500\">\n              <Calendar className=\"w-4 h-4 mr-1\" />\n              {formatDate(post.createdAt)}\n            </div>\n          </div>\n\n          <h1 className=\"mb-4 text-xl font-bold leading-tight text-gray-900 md:text-2xl\">\n            {post.title}\n          </h1>\n          \n          {post.koreanTitle && (\n            <p className=\"mb-4 text-sm text-gray-600\">\n              Original: {post.koreanTitle}\n            </p>\n          )}\n\n          <div className=\"flex items-center gap-6 text-xs text-gray-500\">\n            <div className=\"flex items-center gap-1\">\n              <Eye className=\"w-4 h-4\" />\n              <span>{post.views} views</span>\n            </div>\n            {/* <div className=\"flex items-center gap-1\">\n              <Heart className=\"w-4 h-4\" />\n              <span>{post.likes} likes</span>\n            </div> */}\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"w-4 h-4\" />\n              <span>Updated {formatDate(post.updatedAt)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Featured Images */}\n        {(post.imageUrl || (post.additionalImages && post.additionalImages.length > 0)) && (\n          <div className=\"overflow-hidden\">\n            {/* 다중 이미지가 있는 경우 */}\n            {post.additionalImages && post.additionalImages.length > 0 ? (\n              <div className=\"p-6 space-y-4\">\n                {/* 첫 번째 이미지 (대표 이미지) */}\n                {post.imageUrl && (\n                  <div className=\"w-full\">\n                    <img \n                      src={post.imageUrl} \n                      alt={`${post.title} - 1`}\n                      className=\"object-cover w-full h-auto rounded-lg\"\n                    />\n                  </div>\n                )}\n                \n                {/* 추가 이미지들을 세로로 배치 */}\n                <div className=\"space-y-4\">\n                  {post.additionalImages.map((imageUrl, index) => (\n                    <div key={index} className=\"w-full\">\n                      <img \n                        src={imageUrl} \n                        alt={`${post.title} - ${index + 2}`}\n                        className=\"object-cover w-full h-auto rounded-lg\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              /* 단일 이미지인 경우 */\n              post.imageUrl && (\n                <img \n                  src={post.imageUrl} \n                  alt={post.title}\n                  className=\"object-cover w-full h-full\"\n                />\n              )\n            )}\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"p-6\">\n          <div className=\"prose max-w-none\">\n            <div className=\"text-lg leading-relaxed text-gray-800 whitespace-pre-wrap\">\n              {post.content}\n            </div>\n          </div>\n          \n          {post.koreanContent && (\n            <div className=\"p-6 mt-8 rounded-lg bg-gray-50\">\n              <h3 className=\"flex items-center gap-2 mb-3 text-lg font-bold text-gray-900\">\n                🇰🇷 Korean Original\n              </h3>\n              <div className=\"leading-relaxed text-gray-700 whitespace-pre-wrap\">\n                {post.koreanContent}\n              </div>\n            </div>\n          )}\n\n          {/* Best Comments from Korean Community */}\n          {post.translatedComments && post.translatedComments.length > 0 && (\n            <div className=\"p-6 mt-8 border border-blue-200 rounded-lg bg-blue-50\">\n              <h3 className=\"flex items-center gap-2 mb-4 font-bold text-gray-900 text-md\">\n                💬 Best Comments from Korean Community\n              </h3>\n              <div className=\"flex flex-col gap-2\">\n                {post.translatedComments.map((translatedComment, index) => (\n                  <div key={index} className=\"p-4 bg-white border border-blue-100 rounded-lg shadow-sm\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"flex items-center justify-center flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full\">\n                        <span className=\"text-xs font-medium text-blue-600\">\n                          {index + 1}\n                        </span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm leading-relaxed text-gray-800\">\n                          {translatedComment}\n                        </p>\n                        {/* 한글 원문 표시 */}\n                        {post.extractedComments && post.extractedComments[index] && (\n                          <div className=\"pt-3 mt-3 border-t border-gray-200\">\n                            <div className=\"mb-1 text-xs text-gray-500\">Korean Original</div>\n                            <p className=\"text-xs leading-relaxed text-gray-600\">\n                              {post.extractedComments[index]}\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <p className=\"mt-4 text-xs italic text-blue-600\">\n                * Comments from Korean community sites, automatically translated to English\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className=\"p-6 border-t border-gray-100 bg-gray-50\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"w-full flex justify-end\">\n              <Link \n                href=\"/\"\n                className=\"flex items-center gap-2 px-6 py-2 text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700\"\n              >\n                More Posts\n              </Link>\n            </div>\n          </div>\n        </div>\n      </article>\n      \n      {/* 댓글 섹션 */}\n      <CommentSection postId={post.id} />\n    </div>\n  )\n}\n\nexport default function PostDetailPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"container px-4 py-8 mx-auto\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"w-3/4 h-8 mb-6 bg-gray-200 rounded\"></div>\n            <div className=\"h-64 mb-6 bg-gray-200 rounded\"></div>\n            <div className=\"space-y-3\">\n              <div className=\"w-full h-4 bg-gray-200 rounded\"></div>\n              <div className=\"w-5/6 h-4 bg-gray-200 rounded\"></div>\n              <div className=\"w-4/5 h-4 bg-gray-200 rounded\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    }>\n      <PostDetailContent />\n    </Suspense>\n  )\n} "],"names":[],"mappings":"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","debugId":null}}]
}
"use strict";(()=>{var e={};e.id=855,e.ids=[855],e.modules={1708:e=>{e.exports=require("node:process")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{e.exports=require("node:tty")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{e.exports=require("node:async_hooks")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{e.exports=require("node:child_process")},33873:e=>{e.exports=require("path")},34579:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>c,serverHooks:()=>l,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{DELETE:()=>d,PUT:()=>u});var o=t(96559),n=t(48088),a=t(37719),i=t(32190);let p=new(t(38824)).PrismaClient;async function u(e,{params:r}){try{let{commentId:t}=await r,{content:s,password:o}=await e.json();if(!s?.trim())return i.NextResponse.json({error:"댓글 내용을 입력해주세요."},{status:400});if(s.length>1e3)return i.NextResponse.json({error:"댓글은 1000자를 초과할 수 없습니다."},{status:400});let n=await p.comment.findUnique({where:{id:t}});if(!n)return i.NextResponse.json({error:"댓글을 찾을 수 없습니다."},{status:404});if(!n.password)return i.NextResponse.json({error:"이 댓글은 수정할 수 없습니다. (비밀번호가 설정되지 않음)"},{status:403});if(n.password!==o)return i.NextResponse.json({error:"비밀번호가 일치하지 않습니다."},{status:403});let a=await p.comment.update({where:{id:t},data:{content:s.trim(),updatedAt:new Date},select:{id:!0,content:!0,nickname:!0,createdAt:!0,updatedAt:!0}});return i.NextResponse.json(a)}catch(e){return console.error("댓글 수정 에러:",e),i.NextResponse.json({error:"댓글 수정에 실패했습니다."},{status:500})}}async function d(e,{params:r}){try{let{commentId:t}=await r,{password:s}=await e.json(),o=await p.comment.findUnique({where:{id:t}});if(!o)return i.NextResponse.json({error:"댓글을 찾을 수 없습니다."},{status:404});if(!o.password)return i.NextResponse.json({error:"이 댓글은 삭제할 수 없습니다. (비밀번호가 설정되지 않음)"},{status:403});if(o.password!==s)return i.NextResponse.json({error:"비밀번호가 일치하지 않습니다."},{status:403});return await p.comment.delete({where:{id:t}}),i.NextResponse.json({success:!0,message:"댓글이 삭제되었습니다."})}catch(e){return console.error("댓글 삭제 에러:",e),i.NextResponse.json({error:"댓글 삭제에 실패했습니다."},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/posts/[id]/comments/[commentId]/route",pathname:"/api/posts/[id]/comments/[commentId]",filename:"route",bundlePath:"app/api/posts/[id]/comments/[commentId]/route"},resolvedPagePath:"/Users/damanegi/Desktop/dev/KoreanMemes/src/app/api/posts/[id]/comments/[commentId]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:l}=c;function w(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{e.exports=require("node:os")},51455:e=>{e.exports=require("node:fs/promises")},57975:e=>{e.exports=require("node:util")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{e.exports=require("node:fs")},76760:e=>{e.exports=require("node:path")},77598:e=>{e.exports=require("node:crypto")},78474:e=>{e.exports=require("node:events")}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580,748],()=>t(34579));module.exports=s})();
"use strict";(()=>{var e={};e.id=619,e.ids=[619],e.modules={1708:e=>{e.exports=require("node:process")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{e.exports=require("node:tty")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{e.exports=require("node:async_hooks")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30003:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>x,serverHooks:()=>f,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{DELETE:()=>c,GET:()=>u,PUT:()=>l});var o=r(96559),n=r(48088),a=r(37719),i=r(32190),d=r(38824),p=r(31183);async function u(e,{params:t}){try{let{id:e}=await t,r=await p.z.post.findUnique({where:{id:e},select:{id:!0,title:!0,koreanTitle:!0,content:!0,koreanContent:!0,extractedComments:!0,translatedComments:!0,category:!0,imageUrl:!0,additionalImages:!0,likes:!0,views:!0,createdAt:!0,updatedAt:!0}});if(!r)return i.NextResponse.json({error:"Post not found"},{status:404});let s=await p.z.post.findFirst({where:{createdAt:{lt:r.createdAt}},orderBy:{createdAt:"desc"},select:{id:!0,title:!0}}),o=await p.z.post.findFirst({where:{createdAt:{gt:r.createdAt}},orderBy:{createdAt:"asc"},select:{id:!0,title:!0}});return i.NextResponse.json({post:r,navigation:{prev:s,next:o}})}catch(e){return console.error("Get post error:",e),i.NextResponse.json({error:"Failed to fetch post"},{status:500})}}async function l(e,{params:t}){try{let{id:r}=await t,{title:s,koreanTitle:o,content:n,koreanContent:a,category:u,imageUrl:l,additionalImages:c,extractedComments:x,translatedComments:g}=await e.json();if(!s||!u)return i.NextResponse.json({error:"Title and category are required"},{status:400});if(!Object.values(d.Category).includes(u))return i.NextResponse.json({error:"Invalid category"},{status:400});if(!await p.z.post.findUnique({where:{id:r}}))return i.NextResponse.json({error:"Post not found"},{status:404});let y=await p.z.post.update({where:{id:r},data:{title:s,koreanTitle:o||null,content:n||"",koreanContent:a||null,extractedComments:x&&Array.isArray(x)&&x.length>0?JSON.parse(JSON.stringify(x)):void 0,translatedComments:g&&Array.isArray(g)&&g.length>0?JSON.parse(JSON.stringify(g)):void 0,category:u,imageUrl:l||null,additionalImages:c&&Array.isArray(c)&&c.length>0?JSON.parse(JSON.stringify(c)):void 0}});return console.log("Post updated:",y.id),i.NextResponse.json({success:!0,post:{id:y.id,title:y.title,category:y.category},message:"Post updated successfully"})}catch(e){return console.error("Post update error:",e),i.NextResponse.json({error:"Failed to update post",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function c(e,{params:t}){try{let{id:e}=await t;if(!await p.z.post.findUnique({where:{id:e}}))return i.NextResponse.json({error:"Post not found"},{status:404});return await p.z.post.delete({where:{id:e}}),console.log("Post deleted:",e),i.NextResponse.json({success:!0,message:"Post deleted successfully"})}catch(e){return console.error("Post delete error:",e),i.NextResponse.json({error:"Failed to delete post",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/posts/[id]/route",pathname:"/api/posts/[id]",filename:"route",bundlePath:"app/api/posts/[id]/route"},resolvedPagePath:"/Users/damanegi/Desktop/dev/KoreanMemes/src/app/api/posts/[id]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:y,serverHooks:f}=x;function m(){return(0,a.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:y})}},31421:e=>{e.exports=require("node:child_process")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{e.exports=require("node:os")},51455:e=>{e.exports=require("node:fs/promises")},57975:e=>{e.exports=require("node:util")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{e.exports=require("node:fs")},76760:e=>{e.exports=require("node:path")},77598:e=>{e.exports=require("node:crypto")},78474:e=>{e.exports=require("node:events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,275],()=>r(30003));module.exports=s})();
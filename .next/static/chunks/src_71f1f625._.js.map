{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/damanegi/Desktop/dev/KoreanMemes/src/components/CommentSection.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { MessageCircle, Send, User, Edit2, Trash2, X, Check } from 'lucide-react'\n\ninterface Comment {\n  id: string\n  content: string\n  nickname?: string\n  createdAt: string\n  updatedAt?: string\n}\n\ninterface CommentSectionProps {\n  postId: string\n}\n\ninterface ActionModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onConfirm: (password: string) => void\n  title: string\n  placeholder: string\n  buttonText: string\n  buttonColor: string\n}\n\nfunction ActionModal({ isOpen, onClose, onConfirm, title, placeholder, buttonText, buttonColor }: ActionModalProps) {\n  const [password, setPassword] = useState('')\n\n  if (!isOpen) return null\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (password.trim()) {\n      onConfirm(password.trim())\n      setPassword('')\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-medium text-gray-900\">{title}</h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <input\n              type=\"password\"\n              placeholder={placeholder}\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              autoFocus\n              autoComplete=\"current-password\"\n            />\n          </div>\n          \n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className={`flex-1 px-4 py-2 text-white rounded-lg transition-colors ${buttonColor}`}\n              disabled={!password.trim()}\n            >\n              {buttonText}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport function CommentSection({ postId }: CommentSectionProps) {\n  console.log('CommentSection 렌더링됨, postId:', postId)\n  \n  const [comments, setComments] = useState<Comment[]>([])\n  const [newComment, setNewComment] = useState('')\n  const [nickname, setNickname] = useState('')\n  const [password, setPassword] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [fetchLoading, setFetchLoading] = useState(true)\n  const [fetchError, setFetchError] = useState('')\n  \n  // 수정 관련 상태\n  const [editingComment, setEditingComment] = useState<string | null>(null)\n  const [editContent, setEditContent] = useState('')\n  const [editPassword, setEditPassword] = useState('')\n  \n  // 삭제 관련 상태\n  const [deleteModal, setDeleteModal] = useState({ isOpen: false, commentId: '' })\n\n  const fetchComments = async () => {\n    try {\n      setFetchLoading(true)\n      setFetchError('')\n      const response = await fetch(`/api/posts/${postId}/comments`)\n      if (response.ok) {\n        const data = await response.json()\n        console.log('댓글 데이터:', data) // 디버깅용\n        setComments(Array.isArray(data) ? data : [])\n      } else {\n        setFetchError(`Failed to load comments: ${response.status}`)\n      }\n    } catch (error) {\n      console.error('댓글 로딩 실패:', error)\n      setFetchError('Error occurred while loading comments.')\n    } finally {\n      setFetchLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchComments()\n  }, [postId])\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    const now = new Date()\n    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60))\n    \n    if (diffInHours < 1) return 'Just now'\n    if (diffInHours < 24) return `${diffInHours}h ago`\n    if (diffInHours < 168) return `${Math.floor(diffInHours / 24)}d ago`\n    return date.toLocaleDateString()\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newComment.trim()) return\n\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch(`/api/posts/${postId}/comments`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          content: newComment.trim(),\n          nickname: nickname.trim() || undefined,\n          password: password.trim() || undefined\n        })\n      })\n\n      if (response.ok) {\n        setNewComment('')\n        setNickname('')\n        setPassword('')\n        await fetchComments()\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to submit comment.')\n      }\n    } catch {\n      setError('Error occurred while submitting comment.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleEdit = (comment: Comment) => {\n    setEditingComment(comment.id)\n    setEditContent(comment.content)\n    setEditPassword('')\n  }\n\n  const handleEditSubmit = async (commentId: string) => {\n    if (!editContent.trim() || !editPassword.trim()) return\n\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch(`/api/posts/${postId}/comments/${commentId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          content: editContent.trim(),\n          password: editPassword.trim()\n        })\n      })\n\n      if (response.ok) {\n        setEditingComment(null)\n        setEditContent('')\n        setEditPassword('')\n        await fetchComments()\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to update comment.')\n      }\n    } catch {\n      setError('Error occurred while updating comment.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCancelEdit = () => {\n    setEditingComment(null)\n    setEditContent('')\n    setEditPassword('')\n  }\n\n  const handleDeleteConfirm = async (password: string) => {\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch(`/api/posts/${postId}/comments/${deleteModal.commentId}`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ password })\n      })\n\n      if (response.ok) {\n        setDeleteModal({ isOpen: false, commentId: '' })\n        await fetchComments()\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to delete comment.')\n      }\n    } catch {\n      setError('Error occurred while deleting comment.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"mt-8 border-t pt-8\">\n      {/* 댓글 헤더 */}\n      <div className=\"flex items-center gap-2 mb-6\">\n        <MessageCircle className=\"h-5 w-5 text-blue-600\" />\n        <h3 className=\"text-lg font-medium text-gray-900\">\n          Comments {fetchLoading ? 'Loading...' : fetchError ? 'Load Failed' : `${comments.length}`}\n        </h3>\n      </div>\n\n      {/* 댓글 작성 폼 */}\n      <form onSubmit={handleSubmit} className=\"mb-8 bg-gray-50 rounded-lg p-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n          <input\n            type=\"text\"\n            placeholder=\"Nickname (optional)\"\n            value={nickname}\n            onChange={(e) => setNickname(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n            maxLength={50}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password (for edit/delete, optional)\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n            maxLength={50}\n            autoComplete=\"new-password\"\n          />\n        </div>\n        \n        <div className=\"mb-3\">\n          <textarea\n            placeholder=\"Write your comment...\"\n            value={newComment}\n            onChange={(e) => setNewComment(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm\"\n            rows={3}\n            maxLength={1000}\n          />\n          <div className=\"text-right text-sm text-gray-500 mt-1\">\n            {newComment.length}/1000\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-3 text-sm text-red-600 bg-red-50 p-2 rounded\">\n            {error}\n          </div>\n        )}\n\n        <button\n          type=\"submit\"\n          disabled={!newComment.trim() || loading}\n          className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          <Send className=\"h-4 w-4\" />\n          {loading ? 'Submitting...' : 'Post Comment'}\n        </button>\n      </form>\n\n      {/* 댓글 목록 */}\n      <div className=\"space-y-4\">\n        {fetchLoading ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            Loading comments... 🔄\n          </div>\n        ) : fetchError ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-red-600 mb-2\">{fetchError}</div>\n            <button \n              onClick={fetchComments}\n              className=\"text-blue-600 hover:text-blue-700 underline\"\n            >\n              Try Again\n            </button>\n          </div>\n        ) : comments.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            Be the first to comment! 💬\n          </div>\n        ) : (\n          comments.map((comment) => (\n            <div key={comment.id} className=\"bg-white border rounded-lg p-4\">\n              {editingComment === comment.id ? (\n                // 수정 모드\n                <div className=\"space-y-3\">\n                  <textarea\n                    value={editContent}\n                    onChange={(e) => setEditContent(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                    rows={3}\n                    maxLength={1000}\n                  />\n                  <div className=\"text-right text-sm text-gray-500\">\n                    {editContent.length}/1000\n                  </div>\n                  <input\n                    type=\"password\"\n                    placeholder=\"Enter password\"\n                    value={editPassword}\n                    onChange={(e) => setEditPassword(e.target.value)}\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    maxLength={50}\n                  />\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => handleEditSubmit(comment.id)}\n                      disabled={!editContent.trim() || !editPassword.trim() || loading}\n                      className=\"flex items-center gap-1 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50 transition-colors\"\n                    >\n                      <Check className=\"h-3 w-3\" />\n                      Save Changes\n                    </button>\n                    <button\n                      onClick={handleCancelEdit}\n                      className=\"flex items-center gap-1 bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                // 일반 표시 모드\n                <>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <User className=\"h-4 w-4 text-gray-400\" />\n                      <span className=\"font-medium text-gray-900\">\n                        {comment.nickname || 'Anonymous'}\n                      </span>\n                      <span className=\"text-sm text-gray-500\">\n                        {formatDate(comment.createdAt)}\n                        {comment.updatedAt && comment.updatedAt !== comment.createdAt && (\n                          <span className=\"text-xs text-gray-400 ml-1\">(edited)</span>\n                        )}\n                      </span>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      <button\n                        onClick={() => handleEdit(comment)}\n                        className=\"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors\"\n                        title=\"댓글 수정\"\n                      >\n                        <Edit2 className=\"h-3 w-3\" />\n                      </button>\n                      <button\n                        onClick={() => setDeleteModal({ isOpen: true, commentId: comment.id })}\n                        className=\"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors\"\n                        title=\"댓글 삭제\"\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  </div>\n                  <p className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                    {comment.content}\n                  </p>\n                </>\n              )}\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* 삭제 확인 모달 */}\n      <ActionModal\n        isOpen={deleteModal.isOpen}\n        onClose={() => setDeleteModal({ isOpen: false, commentId: '' })}\n        onConfirm={handleDeleteConfirm}\n        title=\"Delete Comment\"\n        placeholder=\"Enter password\"\n        buttonText=\"Delete\"\n        buttonColor=\"bg-red-600 hover:bg-red-700\"\n      />\n    </div>\n  )\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 721, "column": 0}, "map": {"version":3,"sources":["file:///Users/damanegi/Desktop/dev/KoreanMemes/src/app/post/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, Suspense } from 'react'\nimport { useParams, useRouter, useSearchParams } from 'next/navigation'\nimport { \n  ArrowLeft, \n  Heart, \n  Eye, \n  Calendar,\n  Clock,\n  Share2,\n  Loader2,\n  AlertCircle,\n  Edit3,\n  Trash2\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { CommentSection } from '@/components/CommentSection'\nimport { useAuth } from '@/lib/auth'\n\ninterface Post {\n  id: string\n  title: string\n  koreanTitle?: string\n  content: string\n  koreanContent?: string\n  extractedComments?: string[]\n  translatedComments?: string[]\n  category: string\n  imageUrl?: string\n  additionalImages?: string[]\n  likes: number\n  views: number\n  createdAt: string\n  updatedAt: string\n}\n\nfunction PostDetailContent() {\n  const params = useParams()\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { isAuthenticated, isLoading } = useAuth()\n  const [post, setPost] = useState<Post | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [viewIncremented, setViewIncremented] = useState(false)\n  const [hasSecretAccess, setHasSecretAccess] = useState(false)\n\n  const postId = params?.id as string\n\n  const categories = [\n    { id: 'HUMOR', name: 'K-Humor', emoji: '😂' },\n    { id: 'CULTURE', name: 'K-Culture', emoji: '🏮' },\n    { id: 'DRAMA', name: 'K-Drama', emoji: '📺' },\n    { id: 'LIFESTYLE', name: 'K-Lifestyle', emoji: '🌸' },\n    { id: 'TECH', name: 'K-Tech', emoji: '💻' },\n    { id: 'GENERAL', name: 'General', emoji: '💬' },\n  ]\n\n  // 비밀 액세스 키 확인\n  useEffect(() => {\n    const accessKey = searchParams.get('access')\n    const secretKey = 'korean-memes-secret-2024'\n    \n    if (accessKey === secretKey) {\n      setHasSecretAccess(true)\n    } else {\n      setHasSecretAccess(false)\n    }\n  }, [searchParams])\n\n  // 수정/삭제 권한 확인 - 로딩 중이 아닐 때만 권한 허용\n  const hasEditPermission = !isLoading && (isAuthenticated || hasSecretAccess)\n\n  // 클라이언트 사이드 메타데이터 업데이트\n  useEffect(() => {\n    if (!post) return\n\n    const categoryInfo = getCategoryInfo(post.category)\n    const description = post.content ? \n      `${post.content.substring(0, 160)}...` : \n      `Korean ${categoryInfo.name.toLowerCase()} content: ${post.title}. ${post.koreanTitle ? `Original: ${post.koreanTitle}` : ''}`\n\n    // 페이지 제목 업데이트\n    document.title = `${post.title} - ${categoryInfo.name} | Korean Memes Hub`\n    \n    // 메타 태그 업데이트\n    const updateMeta = (name: string, content: string) => {\n      let meta = document.querySelector(`meta[name=\"${name}\"]`) || \n                 document.querySelector(`meta[property=\"${name}\"]`)\n      if (!meta) {\n        meta = document.createElement('meta')\n        if (name.startsWith('og:') || name.startsWith('twitter:')) {\n          meta.setAttribute('property', name)\n        } else {\n          meta.setAttribute('name', name)\n        }\n        document.head.appendChild(meta)\n      }\n      meta.setAttribute('content', content)\n    }\n\n    // 기본 메타 태그\n    updateMeta('description', description)\n    updateMeta('keywords', ['Korean memes', 'Korean culture', categoryInfo.name, 'Korean humor', 'K-culture'].join(', '))\n    \n    // Open Graph 태그\n    updateMeta('og:title', post.title)\n    updateMeta('og:description', description)\n    updateMeta('og:image', post.imageUrl || '/og-post-default.jpg')\n    updateMeta('og:url', `http://localhost:3000/post/${post.id}`)\n    updateMeta('og:type', 'article')\n    \n    // Twitter 카드\n    updateMeta('twitter:title', post.title)\n    updateMeta('twitter:description', description)\n    updateMeta('twitter:image', post.imageUrl || '/twitter-post-default.jpg')\n    updateMeta('twitter:card', 'summary_large_image')\n\n    // Canonical URL\n    let canonical = document.querySelector('link[rel=\"canonical\"]')\n    if (!canonical) {\n      canonical = document.createElement('link')\n      canonical.setAttribute('rel', 'canonical')\n      document.head.appendChild(canonical)\n    }\n    canonical.setAttribute('href', `http://localhost:3000/post/${post.id}`)\n\n  }, [post])\n\n  useEffect(() => {\n    if (!postId) return\n\n    const fetchPost = async () => {\n      try {\n        setLoading(true)\n        const response = await fetch(`/api/posts/${postId}`)\n        \n        if (!response.ok) {\n          throw new Error('Failed to fetch post')\n        }\n\n        const data = await response.json()\n        setPost(data.post)\n      } catch (err) {\n        console.error('Error fetching post:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load post')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchPost()\n  }, [postId])\n\n  // 조회수 증가 (한 번만 실행)\n  useEffect(() => {\n    if (!postId || viewIncremented) return\n\n    const incrementView = async () => {\n      try {\n        const response = await fetch(`/api/posts/${postId}/view`, {\n          method: 'POST'\n        })\n        \n        if (response.ok) {\n          const data = await response.json()\n          // 로컬 상태의 조회수 업데이트\n          setPost(prev => prev ? { ...prev, views: data.views } : null)\n          setViewIncremented(true)\n        }\n      } catch (error) {\n        console.error('Failed to increment view:', error)\n      }\n    }\n\n    // post가 로드된 후에만 조회수 증가\n    if (post && !loading) {\n      incrementView()\n    }\n  }, [postId, viewIncremented, post?.id, loading])\n\n  const handleDelete = async () => {\n    if (!post) return\n\n    const confirmed = window.confirm('정말로 이 게시글을 삭제하시겠습니까?')\n    if (!confirmed) return\n\n    setIsDeleting(true)\n    \n    try {\n      const response = await fetch(`/api/posts/${post.id}`, {\n        method: 'DELETE'\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to delete post')\n      }\n\n      // 삭제 성공 시 홈으로 리디렉션\n      router.push('/')\n    } catch (error) {\n      console.error('Delete error:', error)\n      alert('게시글 삭제 중 오류가 발생했습니다.')\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    return date.toLocaleDateString('ko-KR', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    })\n  }\n\n  const getCategoryInfo = (categoryId: string) => {\n    return categories.find(cat => cat.id === categoryId) || categories[categories.length - 1]\n  }\n\n  if (loading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"flex justify-center items-center py-12\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\n          <span className=\"ml-3 text-gray-600\">Loading post...</span>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !post) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"text-center py-12\">\n          <AlertCircle className=\"h-16 w-16 text-red-400 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">\n            {error || 'Post not found'}\n          </h2>\n          <p className=\"text-gray-600 mb-6\">\n            The post you&apos;re looking for doesn&apos;t exist or has been removed.\n          </p>\n          <Link \n            href=\"/\"\n            className=\"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to Home\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  const categoryInfo = getCategoryInfo(post.category)\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <Link \n          href=\"/\"\n          className=\"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5\" />\n          Back to Home\n        </Link>\n        \n        {/* 권한이 있는 경우에만 수정/삭제 버튼 표시 */}\n        {hasEditPermission && (\n          <div className=\"flex items-center gap-3\">\n            <Link\n              href={`/edit/${post.id}${hasSecretAccess ? '?access=korean-memes-secret-2024' : ''}`}\n              className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <Edit3 className=\"h-4 w-4\" />\n              수정\n            </Link>\n            <button\n              onClick={handleDelete}\n              disabled={isDeleting}\n              className=\"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isDeleting ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Trash2 className=\"h-4 w-4\" />\n              )}\n              {isDeleting ? '삭제 중...' : '삭제'}\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Post Content */}\n      <article className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-gray-100\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <span className=\"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium\">\n              {categoryInfo.emoji} {categoryInfo.name}\n            </span>\n            <div className=\"flex items-center text-sm text-gray-500\">\n              <Calendar className=\"h-4 w-4 mr-1\" />\n              {formatDate(post.createdAt)}\n            </div>\n          </div>\n\n          <h1 className=\"text-xl md:text-2xl font-bold text-gray-900 mb-4 leading-tight\">\n            {post.title}\n          </h1>\n          \n          {post.koreanTitle && (\n            <p className=\"text-sm text-gray-600 mb-4\">\n              Original: {post.koreanTitle}\n            </p>\n          )}\n\n          <div className=\"flex items-center gap-6 text-xs text-gray-500\">\n            <div className=\"flex items-center gap-1\">\n              <Eye className=\"h-4 w-4\" />\n              <span>{post.views} views</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Heart className=\"h-4 w-4\" />\n              <span>{post.likes} likes</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"h-4 w-4\" />\n              <span>Updated {formatDate(post.updatedAt)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Featured Images */}\n        {(post.imageUrl || (post.additionalImages && post.additionalImages.length > 0)) && (\n          <div className=\"overflow-hidden\">\n            {/* 다중 이미지가 있는 경우 */}\n            {post.additionalImages && post.additionalImages.length > 0 ? (\n              <div className=\"space-y-4 p-6\">\n                {/* 첫 번째 이미지 (대표 이미지) */}\n                {post.imageUrl && (\n                  <div className=\"w-full\">\n                    <img \n                      src={post.imageUrl} \n                      alt={`${post.title} - 1`}\n                      className=\"w-full h-auto object-cover rounded-lg\"\n                    />\n                  </div>\n                )}\n                \n                {/* 추가 이미지들을 세로로 배치 */}\n                <div className=\"space-y-4\">\n                  {post.additionalImages.map((imageUrl, index) => (\n                    <div key={index} className=\"w-full\">\n                      <img \n                        src={imageUrl} \n                        alt={`${post.title} - ${index + 2}`}\n                        className=\"w-full h-auto object-cover rounded-lg\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              /* 단일 이미지인 경우 */\n              post.imageUrl && (\n                <img \n                  src={post.imageUrl} \n                  alt={post.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              )\n            )}\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"p-6\">\n          <div className=\"prose max-w-none\">\n            <div className=\"text-gray-800 leading-relaxed whitespace-pre-wrap text-lg\">\n              {post.content}\n            </div>\n          </div>\n          \n          {post.koreanContent && (\n            <div className=\"mt-8 p-6 bg-gray-50 rounded-lg\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2\">\n                🇰🇷 Korean Original\n              </h3>\n              <div className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                {post.koreanContent}\n              </div>\n            </div>\n          )}\n\n          {/* Best Comments from Korean Community */}\n          {post.translatedComments && post.translatedComments.length > 0 && (\n            <div className=\"mt-8 p-6 bg-blue-50 rounded-lg border border-blue-200\">\n              <h3 className=\"text-md font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                💬 Best Comments from Korean Community\n              </h3>\n              <div className=\"flex flex-col gap-2\">\n                {post.translatedComments.map((translatedComment, index) => (\n                  <div key={index} className=\"p-4 bg-white rounded-lg border border-blue-100 shadow-sm\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-xs font-medium text-blue-600\">\n                          {index + 1}\n                        </span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-gray-800 leading-relaxed text-sm\">\n                          {translatedComment}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <p className=\"text-xs text-blue-600 mt-4 italic\">\n                * Comments from Korean community sites, automatically translated to English\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className=\"p-6 border-t border-gray-100 bg-gray-50\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button className=\"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\">\n                <Heart className=\"h-4 w-4\" />\n                Like ({post.likes})\n              </button>\n              <button className=\"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\">\n                <Share2 className=\"h-4 w-4\" />\n                Share\n              </button>\n            </div>\n            \n            <Link \n              href=\"/\"\n              className=\"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              More Posts\n            </Link>\n          </div>\n        </div>\n      </article>\n      \n      {/* 댓글 섹션 */}\n      <CommentSection postId={post.id} />\n    </div>\n  )\n}\n\nexport default function PostDetailPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-3/4 mb-6\"></div>\n            <div className=\"h-64 bg-gray-200 rounded mb-6\"></div>\n            <div className=\"space-y-3\">\n              <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n              <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\n              <div className=\"h-4 bg-gray-200 rounded w-4/5\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    }>\n      <PostDetailContent />\n    </Suspense>\n  )\n} "],"names":[],"mappings":"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","debugId":null}}]
}